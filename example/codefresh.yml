version: '1.0'
steps:
  BuildingDockerImage:
    title: Building Docker Image
    type: build
    image_name: trivial-web
    working_directory: ./example/
    tag: '${{CF_SHORT_REVISION}}'
    dockerfile: Dockerfile
  PushingToRegistry:
    type: push
    title: Pushing To Bintray Registry
    candidate: ${{MyAppDockerImage}}
    tag: '${{CF_SHORT_REVISION}}'
    registry: bintray 
  ExtraBintrayAttributes:
    title: "Changing Bintray attributes"
    image: kostis-codefresh/bintray-metadata-step:master
    environment:
      - BINTRAY_USER=${{B_USER}}
      - BINTRAY_TOKEN=${{B_TOKEN}}
      - DOCKER_IMAGE=${{CF_REPO_NAME}}
      - NEW_VERSION=${{CF_SHORT_REVISION}}
      - README_FILE=unused
      - VERSION_RELEASE_NOTES=unused
      - IMAGE_LABELS='["one","two"]'
      - VERSION_ATTRIBUTES=unused

   

  